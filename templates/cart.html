{% extends "base.html" %} {% block title %}Your Cart — Luna Case{% endblock %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4 mb-0">Your Cart</h1>
  <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('products') }}"
    >← Continue Shopping</a
  >
</div>

{% if items and items|length > 0 %}
<div class="row g-3">
  {% for it in items %}
  <div class="col-12">
    <div
      class="bg-white border rounded-4 p-3 shadow-sm d-flex gap-3 align-items-center"
    >
      <img
        src="{{ url_for('static', filename='images/' ~ it.img) }}"
        alt="{{ it.title }}"
        style="
          width: 110px;
          height: 110px;
          object-fit: cover;
          border-radius: 16px;
        "
      />

      <div class="flex-grow-1">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h3 class="h6 mb-1">{{ it.title }}</h3>
            <div class="text-muted small">₾{{ it.price }} each</div>
          </div>
          <div class="text-end">
            <div class="fw-bold">Subtotal</div>
            <div>₾{{ it.price * it.quantity }}</div>
          </div>
        </div>

        <div class="d-flex align-items-center justify-content-between mt-3">
          <div class="d-flex align-items-center gap-2">
            <form
              method="POST"
              action="{{ url_for('cart_dec', item_id=it.id) }}"
            >
              <button type="submit" class="btn btn-outline-dark btn-sm">
                −
              </button>
            </form>

            <span class="px-3 py-1 border rounded-pill bg-light"
              >{{ it.quantity }}</span
            >

            <form
              method="POST"
              action="{{ url_for('cart_inc', item_id=it.id) }}"
            >
              <button type="submit" class="btn btn-outline-dark btn-sm">
                +
              </button>
            </form>
          </div>

          <form
            method="POST"
            action="{{ url_for('cart_remove', item_id=it.id) }}"
          >
            <button type="submit" class="btn btn-outline-danger btn-sm">
              Remove
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<div
  class="bg-white border rounded-4 p-4 shadow-sm mt-4 d-flex justify-content-between align-items-center"
>
  <span class="fw-semibold">Total</span>
  <span class="fw-bold fs-5">₾{{ total }}</span>
</div>

<div class="d-flex justify-content-end mt-3">
  <a class="btn btn-dark" href="{{ url_for('checkout') }}">Checkout →</a>
</div>

{% else %}
<div class="bg-white border rounded-4 p-4 shadow-sm text-center">
  <p class="mb-2">Your cart is empty.</p>
  <a href="{{ url_for('products') }}" class="btn btn-dark btn-sm"
    >Go to Products</a
  >
</div>
{% endif %} {% endblock %}
